<h1 class="titolo-pagina">LISTA CLIENTI</h1>

<div class="container card" style="margin-bottom: 200px;">

<div class="d-flex flex-column bd-highlight ">
    <div class="d-flex flex-row bd-highlight card-header">
      <div class="p-2 bd-highlight">
        <input type="text" placeholder="Cerca..." class="form-control" [(ngModel)]="filter" (ngModelChange)="getClienti(filter)">
      </div>
      <div class="p-2 bd-highlight ms-auto">
        <button class="btn btn-danger" (click)="messaggioEliminazione()" title="Elimina i clienti selezionati"  *ngIf="clienteSelezionato()" >Elimina Selezionati</button>
          <i class="material-icons" (click)="aggingiCliente()" title="Aggiungi un nuovo cliente">add_circle_outline</i>
      </div>
    </div>
    <div *ngIf="messaggioErrore" class="alert alert-danger">
      {{ messaggioErrore }}
    </div>

    <div class="d-flex flex-row bd-highlight">
      <table class="table table-striped table-hover">
        
          <thead>
          <tr>
            <th></th>
            <th>Cognome</th> 
            <th>Nome</th>
            <th>Email</th>
            <th>Indirizzo</th>
            <th>Profilo</th>
            <th>Codice fiscale</th>
            <th class="colP">Data creazione</th>
            <th class="colD">Data ultima modifica</th>
            <th class="colP"></th>
          </tr>
        </thead>
        <tbody>

          <tr *ngFor="let cliente of clienti | paginate: { itemsPerPage: righe, currentPage: pagina}">
            <td><input type="checkbox" [(ngModel)]="cliente.selezionato"></td>
            <td>{{ cliente.cognomeCli }}</td>
            <td>{{ cliente.nomeCli }}</td>
            <td>{{ cliente.emailCli }}</td>
            <td>{{ cliente.indirizzoCli }}</td>
            <td>{{ cliente.profiloCli.descPrf }}</td>
            <td>{{ cliente.codiceFiscaleCli }}</td>
            <td>{{ cliente.dataCreCli }}</td>
            <td>{{ cliente.dataUltimaModifica | date: 'dd/MM/yyyy, HH:mm' }}</td>
            <td>
              <i class="material-icons modifica" (click)="modificaCliente(cliente.idCli)" alt="Icona Modifica" title="Modifica">edit</i>
              <i class="material-icons dettagli" (click)="dettagliCliente(cliente.idCli)"alt="Icona Visualizza Dettagli" title="Visualizza Dettagli">visibility</i>
              <i class="material-icons elimina" (click)="eliminaCliente(cliente.idCli)"alt="Icona Elimina" title="Elimina">delete_forever</i>
            </td>
          </tr>
        </tbody>
      </table> 
  </div>
    
  <div class="d-flex flex-row bd-highlight mb-1 me-auto ms-auto">
  <div class="p-2 bd-highlight border border-1 ms-auto me-auto">
    <pagination-controls class="paginazione" (pageChange)="pagina = $event" previousLabel="Precedente" nextLabel="Successivo"></pagination-controls>
  </div>
</div>
</div>
    
<div *ngIf="mostraFinestra" class="modal show" style="display:block;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title ">Conferma</h5>
</div>
      <div class="modal-body">
        <h6>Sei sicuro di voler eliminare i clienti selezionati?</h6>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="eliminaClientiSelezionati()">Elimina Selezionati</button>
        <button type="button" class="btn btn-secondary" (click)="mostraFinestra = false">Annulla</button>
      </div>
    </div>
  </div>
</div>

</div>






